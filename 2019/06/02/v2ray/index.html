<!DOCTYPE html>
<html lang="zh-CN">


<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>
    学习利器V2ray了解一下 | TEAPER
  </title>
  <meta name="description" content="保持知识之美，思想永远年轻！">
  
  <meta name="keywords" content="
  V2ray
  ">
  
  <meta name="author" content="teaper">

  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">
  <meta name="theme-color" content="#1e2327">
  <link rel="apple-touch-icon" href="https://github.githubassets.com/apple-touch-icon.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://github.githubassets.com/apple-touch-icon-180x180.png">

  <link rel="icon" type="image/x-icon" href="https://i.loli.net/2019/06/04/5cf683cea837456459.jpeg">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="/live2d/css/live2d.css">
  <link rel="stylesheet" href="/css/player.css">
  <link rel="stylesheet" href="/iconfont/iconfont.css">
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-140493383-1', 'auto');
  ga('send', 'pageview');
</script>


  

  <script src="//cdnjs.cloudflare.com/ajax/libs/vue/1.0.25-csp/vue.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.11.2/moment.min.js"></script>
</head>

<body id="replica-app">

<nav class="navbar-wrapper">
  <div class="navbar">
    <div class="container clearfix">
      <a href="/" class="navbar-logo"><i class="fa fa-github"></i></a>

      <div class="navbar-search float-left desktop-only">
        <!-- <div class="navbar-search-form">
          <label for="gsc-i-id1">This website</label>
          <div id="google-search">
            <gcse:search></gcse:search>
          </div>
        </div> -->

		<div class="navbar-search-form">
		  <label for="gsc-i-id1">THIS WEBSITE</label>
          <div id="site_search">
        	<input type="text" id="local-search-input" style results="0">
          </div>
        </div>
		
      </div>

      <ul class="navbar-nav float-left">
        
        <li><a href="/archives">Archives</a></li>
        
        
        <li><a href="/categories">Categories</a></li>
        
        
        <li><a href="/tags">Tags</a></li>
        
        
        <li><a href="/links">Links</a></li>
        
		
        <li><a href="/files">Files</a></li>
        
        
        <li class="desktop-only"><a href="/atom.xml" target="_blank">RSS</a></li>
        
      </ul>

      <ul class="navbar-nav user-nav float-right desktop-only">
        <li class="user-nav-notification">
          <a><span class="user-nav-unread"></span><i class="fa fa-bell"></i></a>
        </li>
        <li>
          <a><i class="fa fa-plus"></i> <i class="fa fa-caret-down"></i></a>
        </li>
        <li class="user-nav-logo">
          <a><img src="https://i.loli.net/2019/06/04/5cf683cea837456459.jpeg"> <i class="fa fa-caret-down"></i></a>
        </li>
      </ul>
	  <!-- 站内搜索结果 -->
	  <br>
      <div id="local-search-result"></div>

    </div>
  </div>
</nav>

<div class="main-container">
  <header class="header-wrapper desktop-only">
  <div class="container header-site-detail">
    <ul class="header-toolbar">
      <li class="clearfix">
        <a href="/archives" class="header-toolbar-left"><i class="fa fa-file-text"></i> Posts </a>
        <a href="/archives" class="header-toolbar-right"> 21 </a>
      </li>
      <li>
        <a href="/tags" class="header-toolbar-left"><i class="fa fa-tags"></i> Tags </a>
        <a href="/tags" class="header-toolbar-right"> 52 </a>
      </li>
      <li>
        <a href="/categories" class="header-toolbar-left"><i class="fa fa-folder-open"></i> Categories </a>
        <a href="/categories" class="header-toolbar-right"> 11 </a>
      </li>
    </ul>
    <h2 class="header-title">
      <i class="fa fa-book text-muted"></i>
      <a href="/">TEAPER</a>
      
      
    </h2>
  </div>

  <div class="container">
    <div class="header-tab-wrapper clearfix">
      <span class="header-tab header-tab-selected"><i class="fa fa-thumbs-o-up"></i> Like</span>
      <span class="header-tab"><i class="fa fa-share-alt"></i> Share</span>
      <span class="header-tab"><i class="fa fa-comments-o"></i> Discussion</span>
      <span class="header-tab"><i class="fa fa-bookmark-o"></i> Bookmark </span>
      <span class="header-tab"><i class="fa fa-smile-o"></i> Smile <i class="fa fa-caret-down"></i></span>
    </div>
  </div>
</header>


<div class="post-container container">
  <h3>
    <i class="fa fa-user-o"></i>
    teaper

    <span class="post-date float-right" title="{{moment(1559474139000).format('MMM DD, YYYY, h:mm:ss A')}}">
      <i class="fa fa-pencil-square-o"></i>
      {{moment(1559474139000).fromNow()}}
    </span>
  </h3>

  <article class="post-content">
    <h1 style="text-align:center">学习利器V2ray了解一下</h1>
    <p>之前我一直在Arch Linux下使用 <code>shadowsocksr</code>，随着最近墙的升级，服务器一批一批的封，好多人的 <code>22</code> 端口都封了，SSH登录不了服务器，还有各种TCP回程阻断，网络超时问题，恰好发现了<a href="https://www.v2ray.com/" rel="external nofollow noopener noreferrer" target="_blank">V2ray</a>这款通信工具，现在就来安利一波～</p>
<h4 id="Project-V"><a class="header-anchor" href="#Project-V"></a>Project V</h4>
<p>要了解 <code>V2ray</code> 就必须要知道 <a href="https://github.com/v2ray" rel="external nofollow noopener noreferrer" target="_blank">Project V</a>，根据官方说法：<code>Project V</code> 是一个工具集合，它可以帮助你打造专属的基础<strong>通信网络</strong>，<strong>Project V 的核心工具称为 V2Ray</strong>，其主要负责网络协议和功能的实现，与其它 <code>Project V</code> 通信，<code>V2Ray</code> 可以单独运行，也可以和其它工具配合，以提供简便的操作流程</p>
<p>相对于<code>shadowsocksr</code>来说，它有以下几个优势：</p>
<blockquote>
<p><strong>多入口多出口</strong>: 一个 <code>V2Ray</code> 进程可并发支持多个入站和出站协议，每个协议可独立工作<br>
<strong>可定制化路由</strong>: 入站流量可按配置由不同的出口发出。轻松实现按区域或按域名分流，以达到最优的网络性能<br>
<strong>多协议支持</strong>: V2Ray 可同时支持多个协议，包括 <code>Socks</code>、<code>HTTP</code>、<code>Shadowsocks</code>、<code>VMess</code> 等<br>
<strong>隐蔽性</strong>: V2Ray 的节点可以伪装成正常的网站（HTTPS），将其流量与正常的网页流量混淆，以避开第三方干扰<br>
<strong>反向代理</strong>: 通用的反向代理支持，可实现内网穿透功能<br>
<strong>多平台支持</strong>: 原生支持所有常见平台，如 Windows、Mac OS、Linux，并已有第三方支持移动平台</p>
</blockquote>
<h4 id="安装V2ray服务器脚本"><a class="header-anchor" href="#安装V2ray服务器脚本"></a>安装V2ray服务器脚本</h4>
<p>废话不多说，这里我直接参考<a href="https://www.v2ray.com/" rel="external nofollow noopener noreferrer" target="_blank">官方文档</a>，在我的<a href="https://my.vultr.com/billing/" rel="external nofollow noopener noreferrer" target="_blank">Vultr</a>的<code>Ubuntu16.04 Server</code>主机上安装网络代理，然后在<code>Arch Linux</code>本机上连接，Windows用户请参照官方文档自行安装客户端软件，配置部分是一样的</p>
<p>首先使用SSH登录VPS主机</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh root@139.180.166.23       <span class="comment">#使用ssh连接</span></span><br></pre></td></tr></table></figure>
<p>然后使用 bash 命令官方提供的一键安装脚本</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">root@VentUB:~<span class="comment"># bash &lt;(curl -L -s https://install.direct/go.sh)  #安装一键脚本</span></span><br><span class="line"><span class="comment">#---------------------------输出日志-----------------------------------</span></span><br><span class="line">Installing V2Ray v4.18.2 on x86_64</span><br><span class="line">Downloading V2Ray: https://github.com/v2ray/v2ray-core/releases/download/v4.18.2/v2ray-linux-64.zip</span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100   608    0   608    0     0   1458      0 --:--:-- --:--:-- --:--:--  1458</span><br><span class="line">100 11.2M  100 11.2M    0     0  2988k      0  0:00:03  0:00:03 --:--:-- 4391k</span><br><span class="line">Extracting V2Ray package to /tmp/v2ray.</span><br><span class="line">Archive:  /tmp/v2ray/v2ray.zip</span><br><span class="line">  inflating: /tmp/v2ray/config.json  </span><br><span class="line">   creating: /tmp/v2ray/doc/</span><br><span class="line">  inflating: /tmp/v2ray/doc/readme.md  </span><br><span class="line">  inflating: /tmp/v2ray/geoip.dat    </span><br><span class="line">  inflating: /tmp/v2ray/geosite.dat  </span><br><span class="line">   creating: /tmp/v2ray/systemd/</span><br><span class="line">  inflating: /tmp/v2ray/systemd/v2ray.service  </span><br><span class="line">   creating: /tmp/v2ray/systemv/</span><br><span class="line">  inflating: /tmp/v2ray/systemv/v2ray  </span><br><span class="line">  inflating: /tmp/v2ray/v2ctl        </span><br><span class="line"> extracting: /tmp/v2ray/v2ctl.sig    </span><br><span class="line">  inflating: /tmp/v2ray/v2ray        </span><br><span class="line"> extracting: /tmp/v2ray/v2ray.sig    </span><br><span class="line">  inflating: /tmp/v2ray/vpoint_socks_vmess.json  </span><br><span class="line">  inflating: /tmp/v2ray/vpoint_vmess_freedom.json  </span><br><span class="line">PORT:33857      <span class="comment">#记下PORT</span></span><br><span class="line">UUID:5182c7a0-0279-4221-9294-b16d9d047c6e   <span class="comment">#记下UUID</span></span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/v2ray.service to /etc/systemd/system/v2ray.service.</span><br><span class="line">V2Ray v4.18.2 is installed.     <span class="comment">#V2Ray版本</span></span><br></pre></td></tr></table></figure>
<p>记录下日志中提示的 <strong>PORT</strong>  和  <strong>UUID</strong> 的值，安装成功之后会在<code>/etc/v2ray</code><br>
下生成一个服务器端模板文件<code>config.json</code>文件，使用vim打开它，具体关注我注释的几个参数</p>
<details>
<summary>服务器端的 config.json 文件</summary>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"inbounds"</span>: [&#123;</span><br><span class="line">    <span class="string">"port"</span>: 33857,      <span class="comment">#V2Ray 监听的端口号，客户端连接会用到</span></span><br><span class="line">    <span class="string">"protocol"</span>: <span class="string">"vmess"</span>,    <span class="comment">#入站协议，与客户端保持一致</span></span><br><span class="line">    <span class="string">"settings"</span>: &#123;</span><br><span class="line">      <span class="string">"clients"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">"id"</span>: <span class="string">"5182c7a0-0279-4221-9294-b16d9d047c6e"</span>,     <span class="comment">#UUID值</span></span><br><span class="line">          <span class="string">"level"</span>: 1,</span><br><span class="line">          <span class="string">"alterId"</span>: 64 <span class="comment">#用于认证的动态id</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;],</span><br><span class="line">  <span class="string">"outbounds"</span>: [&#123;</span><br><span class="line">    <span class="string">"protocol"</span>: <span class="string">"freedom"</span>,</span><br><span class="line">    <span class="string">"settings"</span>: &#123;&#125;</span><br><span class="line">  &#125;,&#123;</span><br><span class="line">    <span class="string">"protocol"</span>: <span class="string">"blackhole"</span>,</span><br><span class="line">    <span class="string">"settings"</span>: &#123;&#125;,</span><br><span class="line">    <span class="string">"tag"</span>: <span class="string">"blocked"</span></span><br><span class="line">  &#125;],</span><br><span class="line">  <span class="string">"routing"</span>: &#123;</span><br><span class="line">    <span class="string">"rules"</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">"type"</span>: <span class="string">"field"</span>,</span><br><span class="line">        <span class="string">"ip"</span>: [<span class="string">"geoip:private"</span>],</span><br><span class="line">        <span class="string">"outboundTag"</span>: <span class="string">"blocked"</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</details>
<p><code>config.json</code>中的数据不需要更改，后面客户端连接的时候就参照上面的值就行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service v2ray start <span class="comment">#服务器启动v2ray</span></span><br><span class="line">service v2ray status        <span class="comment">#查看运行状态</span></span><br></pre></td></tr></table></figure>
<h4 id="安装V2ray客户端"><a class="header-anchor" href="#安装V2ray客户端"></a>安装V2ray客户端</h4>
<p>客户端软件在<a href="https://github.com/v2ray/v2ray-core/releases" rel="external nofollow noopener noreferrer" target="_blank">发布页</a>，根据你需要的系统下载匹配型号的安装包，我这里以我系统<code>Arch Linux</code>为例子，其他系统请自行参照<a href>官方文档</a>配置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S v2ray    <span class="comment">#ArchLinux/Manjaro安装v2ray</span></span><br></pre></td></tr></table></figure>
<p>使用gedit编辑<code>/etc/v2ray/config.json</code>文件，替换为我这个模板，修改一下参数即可，注意修改我注释的地方，其他地方不变，实再不会可以用<a href="https://intmainreturn0.com/v2ray-config-gen/" rel="external nofollow noopener noreferrer" target="_blank">配置生成器</a></p>
<details>
<summary>ArchLinux下的v2ray/config.json</summary>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"log"</span>:&#123;</span><br><span class="line">        <span class="string">"loglevel"</span>:<span class="string">"warning"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"inbound"</span>:&#123;</span><br><span class="line">        <span class="string">"port"</span>:1088,    <span class="comment">#本地端口，1080 被我 ssr 用了</span></span><br><span class="line">        <span class="string">"listen"</span>:<span class="string">"127.0.0.1"</span>,</span><br><span class="line">        <span class="string">"protocol"</span>:<span class="string">"socks"</span>,     <span class="comment">#网络传输协议</span></span><br><span class="line">        <span class="string">"settings"</span>:&#123;</span><br><span class="line">            <span class="string">"auth"</span>:<span class="string">"noauth"</span>,</span><br><span class="line">            <span class="string">"udp"</span>:<span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"outbounds"</span>:[</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"tag"</span>:<span class="string">"proxy"</span>,</span><br><span class="line">            <span class="string">"protocol"</span>:<span class="string">"vmess"</span>,</span><br><span class="line">            <span class="string">"settings"</span>:&#123;</span><br><span class="line">                <span class="string">"vnext"</span>:[</span><br><span class="line">                    <span class="comment">#一号服务器</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="string">"address"</span>:<span class="string">"139.182.212.71"</span>, <span class="comment">#IP地址</span></span><br><span class="line">                        <span class="string">"port"</span>:32456,   <span class="comment">#端口</span></span><br><span class="line">                        <span class="string">"users"</span>:[</span><br><span class="line">                            &#123;</span><br><span class="line">                                <span class="string">"id"</span>:<span class="string">"8b9658de-a0s5-408j-a3b3-27a297e4f40b"</span>,   <span class="comment">#UUID</span></span><br><span class="line">                                <span class="string">"alterId"</span>:64</span><br><span class="line">                            &#125;</span><br><span class="line">                        ]</span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="comment">#二号服务器（可选）</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="string">"address"</span>:<span class="string">"45.77.180.110"</span>,</span><br><span class="line">                        <span class="string">"port"</span>:22071,</span><br><span class="line">                        <span class="string">"users"</span>:[</span><br><span class="line">                            &#123;</span><br><span class="line">                                <span class="string">"id"</span>:<span class="string">"13e61d3a-9ce7-428d-a7b6-67e9f8e0bf12"</span>,</span><br><span class="line">                                <span class="string">"alterId"</span>:64</span><br><span class="line">                            &#125;</span><br><span class="line">                        ]</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"policy"</span>:&#123;</span><br><span class="line">        <span class="string">"levels"</span>:&#123;</span><br><span class="line">            <span class="string">"0"</span>:&#123;</span><br><span class="line">                <span class="string">"uplinkOnly"</span>:0</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>V2ray 支持配置多个服务器，那么多个服务器配置的时候，它其实是轮询访问的，也就是说第一个数据包走第一个服务器，第二个数据包走第二个服务器，而不是我们一般认为的第一个服务器被墙了就自动切换到第二个服务器，然后继续传输</p>
<p>路由规则参照 <a href="https://github.com/v2ray/domain-list-community" rel="external nofollow noopener noreferrer" target="_blank">domain-list-community</a> 域名列表，如果该项目中有一整套 <code>google</code> 顶级域名及其子域名，则用 <code>geosite</code> 写成 <code>geosite:google</code> ，如果是普通网站，则使用 <code>domain</code> 写成 <code>domain:google.com</code></p>
</details>
<p>使用<code>v2ray</code>自带了一个检查工具<code>v2ray -test</code>检查<code>json</code>文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">v2ray -<span class="built_in">test</span> -config /etc/v2ray/config.json  <span class="comment">#检查json</span></span><br><span class="line">V2Ray 4.18.0 (Po) 20190228</span><br><span class="line">A unified platform <span class="keyword">for</span> anti-censorship.</span><br><span class="line">Configuration OK.</span><br></pre></td></tr></table></figure>
<p>显示<code>OK</code>就表示没问题了，可以开启本机的开机自启服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> v2ray  <span class="comment">#开机自启v2ray</span></span><br><span class="line">systemctl start v2ray   <span class="comment">#启动v2ray</span></span><br></pre></td></tr></table></figure>
<h4 id="配置shell代理"><a class="header-anchor" href="#配置shell代理"></a>配置shell代理</h4>
<p>为了解决终端下载被墙服务器的安装包失败的问题，所以需要让终端也可以翻墙，顺便提升下载速度</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit ~/.bashrc    <span class="comment">#编辑.bashrc文件</span></span><br></pre></td></tr></table></figure>
<p>在最后追加以下配置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> http_proxy=<span class="string">"socks5://127.0.0.1:1088"</span>     <span class="comment">#本地端口1088</span></span><br><span class="line"><span class="built_in">export</span> https_proxy=<span class="string">"socks5://127.0.0.1:1088"</span></span><br></pre></td></tr></table></figure>
<p>保存之后运行 <code>source ~/.bashrc</code> 命令让它生效</p>
<h4 id="设置PAC代理"><a class="header-anchor" href="#设置PAC代理"></a>设置PAC代理</h4>
<p><code>PAC</code>代理需要生成一个<code>.pac</code>的文件，首先本机安装<code>pip</code>工具</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S python-pip       <span class="comment">#安装pip</span></span><br><span class="line">pip -V      <span class="comment">#查看pip版本</span></span><br><span class="line"><span class="comment">#-------------------------输出-----------------------------</span></span><br><span class="line">pip 19.0.3 from /usr/lib/python3.7/site-packages/pip (python 3.7)</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install genpac     <span class="comment">#使用pip安装genpac，需要root权限</span></span><br><span class="line"><span class="comment">#---------------------------输出-----------------------</span></span><br><span class="line">Collecting genpac</span><br><span class="line">  Downloading https://files.pythonhosted.org/packages/48/fb/b8f9cce57c4ea856e7dd1f9fb917df2896d7e62d43c50ed1af2e50a4e57d/genpac-2.1.0.tar.gz (102kB)</span><br><span class="line">     |████████████████████████████████| 112kB 111kB/s </span><br><span class="line">Installing collected packages: genpac</span><br><span class="line">  Running setup.py install <span class="keyword">for</span> genpac ... <span class="keyword">done</span></span><br><span class="line">Successfully installed genpac-2.1.0</span><br></pre></td></tr></table></figure>
<p>最后执行以下命令，会生成一个auto.pac文件，无输出结果表示执行成功</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">genpac --format=pac -o auto.pac --pac-proxy=<span class="string">"SOCKS5 127.0.0.1:1088"</span></span><br></pre></td></tr></table></figure>
<p>然后在系统中配置代理，以我本机的<code>gnome</code>桌面为例，图1、3是PAC代理，引导pac文件的绝对路径<code>file:///etc/v2ray/auto.pac</code>；图2是全局代理，也可以通过以下命令来设置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">gsettings <span class="built_in">set</span> org.gnome.system.proxy autoconfig-url file:///etc/v2ray/auto.pac</span><br><span class="line">gsettings <span class="built_in">set</span> org.gnome.system.proxy mode <span class="string">'auto'</span></span><br><span class="line"></span><br><span class="line">gsettings <span class="built_in">set</span> org.gnome.system.proxy.socks host <span class="string">'127.0.0.1'</span></span><br><span class="line">gsettings <span class="built_in">set</span> org.gnome.system.proxy.socks port 1088</span><br></pre></td></tr></table></figure>
<details>
<summary style="color:#ff0000">其他搭建方式：一键脚本方式搭建</summary>
<p>服务器使用 <code>bash &lt;(curl -L -s https://install.direct/go.sh)</code> 的搭建方式是官方最简洁，最基础的搭建方法，如果 <code>vmess</code> 协议被识别的话，很快就会被墙掉，而且会出现非常严重的<strong>断流</strong>现象！目前最安全的方式是使用 <code>Vmess</code> 协议加 <code>WebSocket</code> 和 <code>TLS</code> ，通过 <code>Nginx</code> 转发，最后伪装成一个网站 <code>Website</code>，最后配上证书去支持 <code>https</code> 的安全访问！</p>
<p>首先准备一个域名（例如：teaper.dev）,解析一个二级域名到主机上</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>名称</th>
<th>主机</th>
<th>TTL(秒)</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>v2</td>
<td>139.180.166.23</td>
<td>3600</td>
</tr>
</tbody>
</table>
<p>然后使用 <code>ssh root@139.180.166.23</code> 登录到主机上，然后运行 <code>wulabing</code> 大佬的<a href="https://github.com/wulabing/V2Ray_ws-tls_bash_onekey" rel="external nofollow noopener noreferrer" target="_blank">一键安装脚本</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -N --no-check-certificate -q -O install.sh <span class="string">"https://raw.githubusercontent.com/wulabing/V2Ray_ws-tls_bash_onekey/master/install.sh"</span> &amp;&amp; chmod +x install.sh &amp;&amp; bash install.sh</span><br></pre></td></tr></table></figure>
<p>他会下载一个 <code>install.sh</code> 到本地，并且提示输入数字选择功能</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">当前已安装版本:None</span><br><span class="line"></span><br><span class="line">—————————————— 安装向导 ——————————————</span><br><span class="line">0.  升级 脚本</span><br><span class="line">1.  安装 V2Ray (Nginx+ws+tls)</span><br><span class="line">2.  安装 V2Ray (http/2)</span><br><span class="line">3.  升级 V2Ray core</span><br><span class="line">—————————————— 配置变更 ——————————————</span><br><span class="line">4.  变更 UUID</span><br><span class="line">5.  变更 alterid</span><br><span class="line">6.  变更 port</span><br><span class="line">7.  变更 TLS 版本(仅ws+tls有效)</span><br><span class="line">—————————————— 查看信息 ——————————————</span><br><span class="line">8.  查看 实时访问日志</span><br><span class="line">9.  查看 实时错误日志</span><br><span class="line">10. 查看 V2Ray 配置信息</span><br><span class="line">—————————————— 其他选项 ——————————————</span><br><span class="line">11. 安装 4合1 bbr 锐速安装脚本</span><br><span class="line">12. 证书 有效期更新</span><br><span class="line">13. 卸载 V2Ray</span><br><span class="line">14. 退出 </span><br><span class="line"></span><br><span class="line">请输入数字：</span><br></pre></td></tr></table></figure>
<p>我们首先输入 <code>11</code> 安装一个 <code>bbr</code> 加速</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">TCP加速 一键安装管理脚本 [v1.3.2]</span><br><span class="line">  -- 就是爱生活 | 94ish.me --</span><br><span class="line">  </span><br><span class="line"> 0. 升级脚本</span><br><span class="line">————————————内核管理————————————</span><br><span class="line"> 1. 安装 BBR/BBR魔改版内核</span><br><span class="line"> 2. 安装 BBRplus版内核 </span><br><span class="line"> 3. 安装 Lotserver(锐速)内核</span><br><span class="line">————————————加速管理————————————</span><br><span class="line"> 4. 使用BBR加速</span><br><span class="line"> 5. 使用BBR魔改版加速</span><br><span class="line"> 6. 使用暴力BBR魔改版加速(不支持部分系统)</span><br><span class="line"> 7. 使用BBRplus版加速</span><br><span class="line"> 8. 使用Lotserver(锐速)加速</span><br><span class="line">————————————杂项管理————————————</span><br><span class="line"> 9. 卸载全部加速</span><br><span class="line"> 10. 系统配置优化</span><br><span class="line"> 11. 退出脚本</span><br><span class="line">————————————————————————————————</span><br><span class="line"></span><br><span class="line"> 当前状态: 未安装 加速内核 , 未启动</span><br><span class="line"></span><br><span class="line"> 请输入数字 [0-11]:</span><br></pre></td></tr></table></figure>
<p>这里我们输入 <code>2</code> 安装 <code>BBRplus</code> 版内核，然后他会下载内核并且安装，安装过程中会弹出一个是否删除原有内核的面板，记得一定按方向键选择<strong>No</strong><br>
安装成功之后会提示重启，选择 <code>yes</code><br>
重启之后重新使用 <code>ssh</code> 登录面板，运行 <code>./install.sh</code> 命令，输入 <code>11</code> 进入上面的选项，你会发现提示内核已经安装，但是没有启动，这时候再输入 <code>7</code> 使用 <code>BBRplus</code> 版加速，运行成功会退出脚本，就此内核安装和加速已经完成</p>
<p>之后再次运行 <code>./install.sh</code> 选择 <code>1</code> 安装 V2Ray (Nginx+ws+tls)<br>
首先会提示同步时间，因为时间对于 v2ray 特别重要</p>
<ul>
<li>请输入连接端口（default:443）:<strong>443</strong></li>
<li>请输入alterID（default:2 仅允许填数字）:<strong>32</strong></li>
<li>请输入你的域名信息(eg:www.wulabing.com):<strong><a href="https://v2.teaper.dev/" rel="external nofollow noopener noreferrer" target="_blank">v2.teaper.dev</a></strong></li>
<li>请选择支持的 TLS 版本（default:1）:<strong>1</strong></li>
</ul>
<p>安装成功时候会生成一个二维码和 <code>v2ray</code> 的配置信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">地址（address）: v2.teaper.dev </span><br><span class="line">端口（port）： 443 </span><br><span class="line">用户id（UUID）： c3abf69a-a1e5-4f4b-8e53-6916b3ebc27b</span><br><span class="line">额外id（alterId）： 32</span><br><span class="line">加密方式（security）： 自适应 </span><br><span class="line">传输协议（network）： ws </span><br><span class="line">伪装类型（<span class="built_in">type</span>）： none </span><br><span class="line">路径（不要落下/）： /3095b9df/ </span><br><span class="line">底层传输安全： tls </span><br><span class="line">URL导入链接:vmess://ewogICJ2IjogIjIiLAogICJwcyI6ICJ3dWxhYmluZ192Mi50ZWFwZXIuZGV2IiwKICAiYWRkIjogInYyLnRlYXBlci5kZXYiLAogICJwb3J0IjogIjQ0MyIsCiAgImlkIjogImMzYWJmNjlhLWExZTUtNGYzYi04ZTUzLTy6MTZiM2ViYzI3YiIsCiAgImFpZCI6ICIzMiIsCiAgIm5ldCI6ICJ3cyIsCiAgInR5cGUiOiAibm9uZSIsCiAgImhvc3QiOiAidjIudGVhcGVyLmRldiIsCiAgInBhdGgiOiAiLzMwOTViOWRmLyIsCiAgInRscyI6ICJ0bHMiCn0K</span><br></pre></td></tr></table></figure>
<p>由于我们服务器那边使用了 <code>TLS</code> 及 <code>WebSocket</code> ，所以客户端 <code>config.json</code> 的配置就不能使用原版 <code>V2ray</code> 的方式去配置<br>
这里我们可以参照<a href="https://github.com/KiriKira/vTemplate" rel="external nofollow noopener noreferrer" target="_blank">vTemplate</a>中的对应技术的一键脚本配置方式<a href="https://github.com/KiriKira/vTemplate/blob/master/websocket%2BNginx%2BTLS/config_client.json" rel="external nofollow noopener noreferrer" target="_blank">config_client.json</a>文件，根据服务器生成的信息将本地电脑的 <code>config.json</code> 修改一下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"outbound"</span>: &#123;</span><br><span class="line">    <span class="string">"protocol"</span>: <span class="string">"freedom"</span>,</span><br><span class="line">    <span class="string">"settings"</span>: &#123;&#125;,</span><br><span class="line">    <span class="string">"tag"</span>: <span class="string">"direct"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"inboundDetour"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"port"</span>: 1088,     <span class="comment">#本地电脑端口（建议1080，我是因为1080给了 SSR）</span></span><br><span class="line">      <span class="string">"listen"</span>: <span class="string">"127.0.0.1"</span>,</span><br><span class="line">      <span class="string">"protocol"</span>: <span class="string">"socks"</span>,</span><br><span class="line">      <span class="string">"settings"</span>: &#123;</span><br><span class="line">        <span class="string">"auth"</span>: <span class="string">"noauth"</span>,</span><br><span class="line">        <span class="string">"timeout"</span>: 300,</span><br><span class="line">        <span class="string">"udp"</span>: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"outboundDetour"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"mux"</span>: &#123;</span><br><span class="line">        <span class="string">"concurrency"</span>: 6,</span><br><span class="line">        <span class="string">"enabled"</span>: <span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">"protocol"</span>: <span class="string">"vmess"</span>,</span><br><span class="line">      <span class="string">"settings"</span>: &#123;</span><br><span class="line">        <span class="string">"vnext"</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="string">"users"</span>: [</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="string">"id"</span>: <span class="string">"c3abf69a-a1e5-4f4b-8e53-6916b3ebc27b"</span>,   <span class="comment">#UUID（修改）</span></span><br><span class="line">                <span class="string">"level"</span>: 0,</span><br><span class="line">                <span class="string">"alterId"</span>: 32,  <span class="comment">#alterID（修改）</span></span><br><span class="line">                <span class="string">"security"</span>: <span class="string">"aes-128-cfb"</span></span><br><span class="line">              &#125;</span><br><span class="line">            ],</span><br><span class="line">            <span class="string">"address"</span>: <span class="string">"v2.teaper.dev"</span>,     <span class="comment">#域名地址（修改）</span></span><br><span class="line">            <span class="string">"port"</span>: 443     <span class="comment">#端口</span></span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">"streamSettings"</span>: &#123;</span><br><span class="line">        <span class="string">"tlsSettings"</span>: &#123;</span><br><span class="line">          <span class="string">"allowInsecure"</span>: <span class="literal">false</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"wsSettings"</span>: &#123;</span><br><span class="line">          <span class="string">"headers"</span>: &#123;</span><br><span class="line">            <span class="string">"Host"</span>: <span class="string">"v2.teaper.dev"</span>     <span class="comment">#域名地址（修改）</span></span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="string">"path"</span>: <span class="string">"/3095b9df/"</span>      <span class="comment">#静态资源路径（修改）</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"network"</span>: <span class="string">"ws"</span>,</span><br><span class="line">        <span class="string">"security"</span>: <span class="string">"tls"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">"tag"</span>: <span class="string">"proxy"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"protocol"</span>: <span class="string">"blackhole"</span>,</span><br><span class="line">      <span class="string">"settings"</span>: &#123;&#125;,</span><br><span class="line">      <span class="string">"tag"</span>: <span class="string">"block"</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"dns"</span>: &#123;</span><br><span class="line">    <span class="string">"servers"</span>: [</span><br><span class="line">      <span class="string">"8.8.8.8"</span>,</span><br><span class="line">      <span class="string">"8.8.4.4"</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"inbound"</span>: &#123;</span><br><span class="line">    <span class="string">"port"</span>: 1087,</span><br><span class="line">    <span class="string">"listen"</span>: <span class="string">"127.0.0.1"</span>,</span><br><span class="line">    <span class="string">"protocol"</span>: <span class="string">"http"</span>,</span><br><span class="line">    <span class="string">"settings"</span>: &#123;</span><br><span class="line">      <span class="string">"timeout"</span>: 300</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"policy"</span>: &#123;</span><br><span class="line">    <span class="string">"levels"</span>: &#123;</span><br><span class="line">      <span class="string">"0"</span>: &#123;</span><br><span class="line">        <span class="string">"uplinkOnly"</span>: 0,</span><br><span class="line">        <span class="string">"downlinkOnly"</span>: 0,</span><br><span class="line">        <span class="string">"connIdle"</span>: 150,</span><br><span class="line">        <span class="string">"handshake"</span>: 4</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"routing"</span>: &#123;</span><br><span class="line">    <span class="string">"settings"</span>: &#123;</span><br><span class="line">      <span class="string">"rules"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">"type"</span>: <span class="string">"field"</span>,</span><br><span class="line">          <span class="string">"domain"</span>: [</span><br><span class="line">            <span class="string">"geosite:cn"</span></span><br><span class="line">          ],</span><br><span class="line">          <span class="string">"outboundTag"</span>: <span class="string">"direct"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">"type"</span>: <span class="string">"field"</span>,</span><br><span class="line">          <span class="string">"domain"</span>: [</span><br><span class="line">            <span class="string">"google"</span>,</span><br><span class="line">            <span class="string">"facebook"</span>,</span><br><span class="line">            <span class="string">"youtube"</span>,</span><br><span class="line">            <span class="string">"twitter"</span>,</span><br><span class="line">            <span class="string">"instagram"</span>,</span><br><span class="line">            <span class="string">"gmail"</span>,</span><br><span class="line">            <span class="string">"domain:twimg.com"</span>,</span><br><span class="line">            <span class="string">"domain:t.co"</span></span><br><span class="line">          ],</span><br><span class="line">          <span class="string">"outboundTag"</span>: <span class="string">"proxy"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">"type"</span>: <span class="string">"field"</span>,</span><br><span class="line">          <span class="string">"ip"</span>: [</span><br><span class="line">            <span class="string">"8.8.8.8/32"</span>,</span><br><span class="line">            <span class="string">"8.8.4.4/32"</span>,</span><br><span class="line">            <span class="string">"91.108.56.0/22"</span>,</span><br><span class="line">            <span class="string">"91.108.4.0/22"</span>,</span><br><span class="line">            <span class="string">"109.239.140.0/24"</span>,</span><br><span class="line">            <span class="string">"149.154.164.0/22"</span>,</span><br><span class="line">            <span class="string">"91.108.56.0/23"</span>,</span><br><span class="line">            <span class="string">"67.198.55.0/24"</span>,</span><br><span class="line">            <span class="string">"149.154.168.0/22"</span>,</span><br><span class="line">            <span class="string">"149.154.172.0/22"</span></span><br><span class="line">          ],</span><br><span class="line">          <span class="string">"outboundTag"</span>: <span class="string">"proxy"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">"type"</span>: <span class="string">"field"</span>,</span><br><span class="line">          <span class="string">"ip"</span>: [</span><br><span class="line">            <span class="string">"192.168.0.0/16"</span>,</span><br><span class="line">            <span class="string">"10.0.0.0/8"</span>,</span><br><span class="line">            <span class="string">"172.16.0.0/12"</span>,</span><br><span class="line">            <span class="string">"127.0.0.0/8"</span>,</span><br><span class="line">            <span class="string">"geoip:cn"</span></span><br><span class="line">          ],</span><br><span class="line">          <span class="string">"outboundTag"</span>: <span class="string">"direct"</span></span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="string">"domainStrategy"</span>: <span class="string">"IPIfNonMatch"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"strategy"</span>: <span class="string">"rules"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</details>
<p><img src="https://i.loli.net/2019/06/02/5cf3ad11830e456416.png" alt></p>
<p><img src="https://i.loli.net/2019/06/02/5cf3ad19058b190157.png" alt></p>
<p><img src="https://i.loli.net/2019/06/02/5cf3ad1f944f214959.png" alt></p>

  </article>
</div>


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.min.js"></script>
<div class="container" id="gitalk-container"></div>
<script>
    var gitalk = new Gitalk({
        clientID: '79a82d93fcd761032f45',
        clientSecret: 'b784392d66d81a991565a56598f2d369e71e21ad',
        repo: 'hexoblog',
        owner: 'teaper',
        admin: ['teaper'],
	id: md5(location.pathname),
        distractionFreeMode: true
    })
    gitalk.render('gitalk-container')
</script>




</div>

<div class="footer-wrapper container">
  <footer class="footer clearfix">
    <div class="clearfix">
    <a href="https://www.teaper.dev" class="footer-logo">
      <i class="fa fa-github"></i>
    </a>
    <ul class="footer-social-link">
      <li>© 2019 teaper</li>
      <li><a href="https://www.teaper.dev">Home</a></li>
      
      <li><a href="https://github.com/teaper" rel="external nofollow noopener noreferrer" target="_blank">Github</a></li>
      
      <li><a href="https://www.weibo.com/5806191772" rel="external nofollow noopener noreferrer" target="_blank">Weibo</a></li>
      
      <li><a href="https://twitter.com/TEAPERS" rel="external nofollow noopener noreferrer" target="_blank">Twitter</a></li>
      
    </ul>
    <div class="footer-theme-info" id="hitokoto">
       行是知之始 ❤ 知是行之成
    </div>
    </div>
    
    <div class="footer-pageview">
        <a href="https://info.flagcounter.com/MrmG" rel="external nofollow noopener noreferrer" target="_blank">
          <img src="https://s04.flagcounter.com/count2/MrmG/bg_FFFFFF/txt_6A737D/border_FFFFFF/columns_7/maxflags_14/viewers_3/labels_1/pageviews_1/flags_0/percent_0/">
        </a>
    </div>
    
  </footer>
</div>
<!-- QPlayer音乐播放器 -->
<div id="QPlayer">
<div id="pContent">
	<div id="player">
		<span class="cover"></span>
		<div class="ctrl">
			<div class="musicTag marquee">
				<strong>Title</strong>
				 <span> - </span>
				<span class="artist">Artist</span>
			</div>
			<div class="progress">
				<div class="timer left">0:00</div>
				<div class="contr">
					<div class="rewind icon"></div>
					<div class="playback icon"></div>
					<div class="fastforward icon"></div>
				</div>
				<div class="right">
					<div class="liebiao icon"></div>
				</div>
			</div>
		</div>
	</div>
	<div class="ssBtn">
	        <div class="adf"></div>
    </div>
</div>
<ol id="playlist"></ol>
</div>
<!-- <script src="js/jquery.min.js"></script> -->
<!-- <script src="js/jquery.marquee.min.js"></script> -->
<script type="text/javascript" src="https://cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script type="text/javascript" src="//cdn.jsdelivr.net/jquery.marquee/1.4.0/jquery.marquee.min.js"></script>

<script src="/js/playlist.js"></script>
<script src="/js/player.js"></script>
<script>
function bgChange(){
	var lis= $('.lib');
	for(var i=0; i<lis.length; i+=2)
	lis[i].style.background = 'rgba(246, 246, 246, 0.5)';
	
	$(".avatar").hover(function(){
		$(".avatar").attr({
		"src" : "http://ww1.sinaimg.cn/large/006kWbIoly1g763f4h9w5j30np0np40j.jpg"
		});
	},function(){
		$(".avatar").attr({
		"src" : "https://i.loli.net/2019/06/04/5cf683cea837456459.jpeg"
		});
	});
}
window.onload = bgChange;
</script>

<!-- Live2D血小板 -->
<div id="landlord">
    <div class="message" style="opacity:0"></div>
    <canvas id="live2d" width="560" height="500" class="live2d"></canvas>
    <!-- 省略隐藏按钮 -->
</div>

<!-- 鼠标单击爆炸区域 -->
<canvas class="fireworks" style="position:fixed;left:0;top:0;z-index:1031;pointer-events:none;"></canvas>

<script type="text/javascript" src="https://cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script type="text/javascript">
    var message_Path = '/live2d/'
    var home_Path = 'https://www.teaper.dev/'
</script>
<script type="text/javascript" src="/live2d/js/live2d.js"></script>
<script type="text/javascript" src="/live2d/js/message.js"></script>
<script type="text/javascript">
    loadlive2d("live2d", "/live2d/model/xiaoban/model.json");
</script>

<!-- 打字泡沫 -->
<script type="text/javascript" src="/js/activate-power-mode.js"></script>
<script>
    POWERMODE.colorful = true;  
    POWERMODE.shake = false;    
    document.body.addEventListener('input', POWERMODE);
</script>

<!-- 引入一言 -->
<script src="https://cdn.jsdelivr.net/npm/bluebird@3/js/browser/bluebird.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/whatwg-fetch@2.0.3/fetch.min.js"></script>
<script src="https://v1.hitokoto.cn/?encode=js&select=%23hitokoto" defer></script>
<!-- <script src="/js/hitokoto.js"></script> -->

<!-- 粒子特效 -->
<!-- <script src="/js/canvas-nest.min.js"></script> -->

<!-- 鼠标单击爱心特效 -->
<script src="/js/mouse.js"></script>
<!-- 鼠标单击爆炸特效 -->
<script src="/js/anime.min.js"></script>
<script src="/js/fireworks.js"></script>

<!-- 站内搜索 -->
<script src="/js/search.js"></script>



<script>
  (function() {
    var cx = '014633199185561276043:bpv9wnr4qhc';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
      '//cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>



<script src="/js/main.js"></script>

</body>
</html>
